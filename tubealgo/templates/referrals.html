{% extends "app_layout.html" %}

{% block app_content %}
<div class="max-w-4xl mx-auto">
    <div class="text-center mb-12">
        <h1 class="text-4xl font-bold text-foreground font-display">Refer & Earn</h1>
        <p class="text-lg text-muted-foreground mt-2">Invite other creators and earn credits!</p>
    </div>
    <div class="bg-card p-8 rounded-xl border shadow-sm text-center">
        <h3 class="text-xl font-semibold text-foreground">Your Unique Referral Link</h3>
        <p class="text-muted-foreground mt-1 mb-4">Share this link with your friends. When they subscribe, you'll earn credits.</p>
        <div id="referral-link" class="my-4 bg-secondary p-4 rounded-lg text-lg font-mono break-words text-left">{{ referral_link }}</div>
        <button id="copy-btn" class="bg-primary text-primary-foreground px-6 py-3 rounded-lg font-semibold w-full sm:w-auto hover:bg-primary/90 transition-colors">
            <i class="fa-regular fa-copy mr-2"></i>
            <span id="copy-btn-text">Copy Link</span>
        </button>
    </div>
</div>

<script>
    document.getElementById('copy-btn').addEventListener('click', () => {
        const link = document.getElementById('referral-link').textContent;
        navigator.clipboard.writeText(link).then(() => {
            const btnText = document.getElementById('copy-btn-text');
            const originalText = btnText.textContent;
            btnText.textContent = 'Copied!';
            setTimeout(() => {
                btnText.textContent = originalText;
            }, 2000);
        });
    });
</script>
{% endblock %}
