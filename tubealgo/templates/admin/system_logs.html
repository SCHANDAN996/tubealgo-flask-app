{% extends "admin/admin_layout.html" %}
{% block title %}System Logs{% endblock %}
{% block header_title %}System Logs{% endblock %}

{% block content %}
<div class="bg-card rounded-lg border">
    <div class="overflow-x-auto">
        <table class="w-full text-left text-sm">
            <thead class="bg-secondary">
                <tr>
                    <th class="p-4 font-semibold">Timestamp (UTC)</th> {# #}
                    <th class="p-4 font-semibold">Type</th> {# #}
                    <th class="p-4 font-semibold">Message</th> {# #}
                    <th class="p-4 font-semibold">Details</th> {# #}
                </tr>
            </thead>
            <tbody>
            {% for log in logs.items %} {# #}
                <tr class="border-t"> {# #}
                    <td class="p-4 whitespace-nowrap text-muted-foreground">{{ log.timestamp.strftime('%Y-%m-%d %H:%M:%S') }}</td> {# #}
                    <td class="p-4"> {# #}
                        {% if log.log_type == 'QUOTA_EXCEEDED' %} {# #}
                            <span class="font-semibold px-2 py-0.5 rounded-full bg-red-100 text-red-800">{{ log.log_type }}</span> {# #}
                        {% elif log.log_type == 'ERROR' %} {# #}
                            <span class="font-semibold px-2 py-0.5 rounded-full bg-yellow-100 text-yellow-800">{{ log.log_type }}</span> {# #}
                        {% else %} {# #}
                            <span class="font-semibold px-2 py-0.5 rounded-full bg-blue-100 text-blue-800">{{ log.log_type }}</span> {# #}
                        {% endif %} {# #}
                    </td> {# #}
                    <td class="p-4 font-medium text-foreground">{{ log.message }}</td> {# #}
                    <td class="p-4 text-xs font-mono text-muted-foreground whitespace-pre-wrap break-all">{{ log.details }}</td> {# #}
                </tr> {# #}
            {% else %} {# #}
                <tr> {# #}
                    <td colspan="4" class="p-6 text-center text-muted-foreground">No system logs found.</td> {# #}
                </tr> {# #}
            {% endfor %} {# #}
            </tbody>
        </table>
    </div>
</div>

{% if logs.pages > 1 %} {# #}
<div class="mt-6 flex justify-between items-center"> {# #}
    <p class="text-sm text-muted-foreground"> {# #}
        Showing {{ logs.items | length }} of {{ logs.total }} logs. {# #}
    </p> {# #}
    <div class="flex items-center space-x-1"> {# #}
        {% if logs.has_prev %} {# #}
            <a href="{{ url_for('admin.system_logs', page=logs.prev_num) }}" class="px-3 py-1 rounded-md bg-card border hover:bg-secondary">&laquo;</a> {# #}
        {% endif %} {# #}
        {% for page_num in logs.iter_pages() %} {# #}
            {% if page_num %} {# #}
                <a href="{{ url_for('admin.system_logs', page=page_num) }}" class="px-3 py-1 rounded-md border {{ 'bg-primary text-primary-foreground' if page_num == logs.page else 'bg-card hover:bg-secondary' }}">{{ page_num }}</a> {# #}
            {% else %} {# #}
                <span class="px-3 py-1">...</span> {# #}
            {% endif %} {# #}
        {% endfor %} {# #}
        {% if logs.has_next %} {# #}
            <a href="{{ url_for('admin.system_logs', page=logs.next_num) }}" class="px-3 py-1 rounded-md bg-card border hover:bg-secondary">&raquo;</a> {# #}
        {% endif %} {# #}
    </div> {# #}
</div> {# #}
{% endif %} {# #}
{% endblock %} {# #}

